<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Python 열거형과 SQLAlchemy" />
<meta name="author" content="김 정배" />
<meta property="og:locale" content="ko_KR" />
<meta name="description" content="Python의 Enum Type" />
<meta property="og:description" content="Python의 Enum Type" />
<link rel="canonical" href="https://blog.by-softcorp.com/posts/annotated-enum/" />
<meta property="og:url" content="https://blog.by-softcorp.com/posts/annotated-enum/" />
<meta property="og:site_name" content="BY Soft Tech Insights" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-05-15T09:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Python 열거형과 SQLAlchemy" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"김 정배"},"dateModified":"2022-05-15T09:00:00+09:00","datePublished":"2022-05-15T09:00:00+09:00","description":"Python의 Enum Type","headline":"Python 열거형과 SQLAlchemy","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.by-softcorp.com/posts/annotated-enum/"},"url":"https://blog.by-softcorp.com/posts/annotated-enum/"}</script>
<!-- End Jekyll SEO tag -->


  <title>Python 열거형과 SQLAlchemy | BY Soft Tech Insights
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicons/site.webmanifest">
<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="BY Soft Tech Insights">
<meta name="application-name" content="BY Soft Tech Insights">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin>
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
    

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">
  

  <!-- GA -->
  

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css">

  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.25.0/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Manific Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css">
  

  <!-- JavaScript -->

  
    <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      if (this.hasMode) {
        if (this.isDarkMode) {
          if (!this.isSysDarkPrefer) {
            this.setDark();
          }
        } else {
          if (this.isSysDarkPrefer) {
            this.setLight();
          }
        }
      }

      let self = this;

      /* always follow the system prefers */
      this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          if (self.isDarkMode) {
            if (!self.isSysDarkPrefer) {
              self.setDark();
            }
          } else {
            if (self.isSysDarkPrefer) {
              self.setLight();
            }
          }

          self.clearMode();
        }

        self.notify();
      });
    } /* constructor() */

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isSysDarkPrefer() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get isLightMode() {
      return this.mode === ModeToggle.LIGHT_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }

    /* get the current mode on screen */
    get modeStatus() {
      if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) {
        return ModeToggle.DARK_MODE;
      } else {
        return ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }

    /* Notify another plugins that the theme mode has changed */
    notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        if (this.isSysDarkPrefer) {
          if (this.isLightMode) {
            this.clearMode();
          } else {
            this.setLight();
          }
        } else {
          if (this.isDarkMode) {
            this.clearMode();
          } else {
            this.setDark();
          }
        }
      } else {
        if (this.isSysDarkPrefer) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    } /* flipMode() */
  } /* ModeToggle */

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/commons/bi.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <h1 class="site-title">
      <a href="/">BY Soft Tech Insights</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">Building the Future with the Power of Code, Our Story Awaits You Here.</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="mode-toggle btn" aria-label="Switch Mode">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/BY-SoftCorp"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['dev','by-softcorp.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">
                Home
              </a>
            </span>

          
        
          
        
          
            
              <span>Python 열거형과 SQLAlchemy</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>Python 열거형과 SQLAlchemy</h1>

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1652572800"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  May 15, 2022
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              
                김 정배
                
              
            
          </em>
        </span>

        <!-- read time -->
        <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="2345 words"
>
  <em>13 min</em> read</span>

      </div>
      <!-- .d-flex -->
    </div>
    <!-- .post-meta -->
  </header>

  <div class="content">
    <h2 id="python의-enum-type"><span class="me-2">Python의 Enum Type</span><a href="#python의-enum-type" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>기본적으로 Python의 열거형은 여러 이름을 같은 값에 대해 별칭으로 사용합니다.
예를 들면 열거형의 멤버에 동일한 값을 가진 A와 B가 정의되어 있다면 B는 A의 별칭입니다.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Shape</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">SQUARE</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">DIAMOND</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">CIRCLE</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">ALIAS_FOR_SQUARE</span> <span class="o">=</span> <span class="mi">2</span>
</pre></td></tr></tbody></table></code></div></div>

<p>위 Shape를 예로 들어보면 <code class="language-plaintext highlighter-rouge">ALIAS_FOR_SQUARE</code>는 <code class="language-plaintext highlighter-rouge">SQUARE</code>의 별칭으로 SQUARE, ALIAS_FOR_SQUARE 중 어느 것을 조회해도 <code class="language-plaintext highlighter-rouge">2</code>(<code class="language-plaintext highlighter-rouge">SQUARE</code>)를 반환하게 됩니다.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">Shape</span><span class="p">.</span><span class="n">SQUARE</span>
<span class="o">&lt;</span><span class="n">Shape</span><span class="p">.</span><span class="n">SQUARE</span><span class="p">:</span> <span class="mi">2</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Shape</span><span class="p">.</span><span class="n">ALIAS_FOR_SQUARE</span>
<span class="o">&lt;</span><span class="n">Shape</span><span class="p">.</span><span class="n">SQUARE</span><span class="p">:</span> <span class="mi">2</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Shape</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">Shape</span><span class="p">.</span><span class="n">SQUARE</span><span class="p">:</span> <span class="mi">2</span><span class="o">&gt;</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="api로-열거형을-전달할때-고민"><span class="me-2">API로 열거형을 전달할때 고민</span><a href="#api로-열거형을-전달할때-고민" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>FastAPI는 router의 요소를 자동으로 문서화해 주는 기능이 있습니다. 이는 문서작성의 시간을 상당 부분 줄여주어 매우 편리한 기능이라고 생각하는데 Python 열거형에 대해 조금은 부족한 부분이 있죠.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">RequestEmailAuthType</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
    <span class="n">JOIN</span> <span class="o">=</span> <span class="s">'1'</span>
    <span class="n">RESET_PASSWORD</span> <span class="o">=</span> <span class="s">'2'</span>
<span class="p">...</span>
<span class="k">class</span> <span class="nc">RequestEmailAuthIn</span><span class="p">(</span><span class="n">CamelModel</span><span class="p">):</span>
    <span class="n">request_type</span><span class="p">:</span> <span class="n">RequestEmailAuthType</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'요청 타입'</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>위와 같은 열거형을 API 요청에서 필드로 받는다고 가정하면 redoc 문서는 아래와 같이 나오게 됩니다.
<a href="/assets/res/alex/enum-body-default.png" class="popup img-link center-image shimmer"><img src="/assets/res/alex/enum-body-default.png" alt="default-request-body-enum"  loading="lazy"></a>
이 문서에는 한 가지 큰 문제가 있습니다. 바로 <code class="language-plaintext highlighter-rouge">"1"</code>과<code class="language-plaintext highlighter-rouge">"2"</code>가 무엇을 뜻하는지 문서만 보아서는 알 수가 없다는 점이죠. 다행히도 이 문제는 조금 간단하게 해결할 수 있습니다. 바로 Python의 <code class="language-plaintext highlighter-rouge">__doc__</code> 기능을 이용해서죠.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">RequestEmailAuthType</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
    <span class="s">"""
    1: 가입, 2: 비밀번호 초기화
    """</span>
    <span class="n">JOIN</span> <span class="o">=</span> <span class="s">'1'</span>
    <span class="n">RESET_PASSWORD</span> <span class="o">=</span> <span class="s">'2'</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이런 식으로 열거형에 <code class="language-plaintext highlighter-rouge">__doc__</code>항목을 추가해 주면 redoc은 아래와 같이 자동으로 각각의 값에 대한 설명을 만들어줍니다.
<a href="/assets/res/alex/enum-body-doc.png" class="popup img-link center-image shimmer"><img src="/assets/res/alex/enum-body-doc.png" alt="doc-request-body-enum"  loading="lazy"></a></p>

<h2 id="sqlalchemy와의-연동"><span class="me-2">SQLAlchemy와의 연동</span><a href="#sqlalchemy와의-연동" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>FastAPI에서 ORM 기능을 이용하기 위해선 <code class="language-plaintext highlighter-rouge">SQLAlchemy</code>라는 OpneSource를 이용합니다. 매우 잘 만들어진 OpenSource이지만 Database에 열거형의 타입을 넣을 때 열거형이 <code class="language-plaintext highlighter-rouge">값(value)</code>이 아닌 <code class="language-plaintext highlighter-rouge">키(name)</code>가 들어간다는 것입니다.
키가 들어가는 건 나름 의미 있는 데이터가 들어가는 것이라 데이터 베이스의 값을 직접 열어볼 때 조금은 더 직감적일 수 있다는 장점이 있긴 하지만, 최근 개발 동향상 데이터베이스에 직접 접근해서 CRUD 작업을 하는 경우는 잘 없다 보니 저장되는 데이터의 용량을 줄이기 위해 위에서 언급했던 별칭을 이용해 보도록 하겠습니다.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">RequestEmailAuthType</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
    <span class="n">JOIN</span> <span class="o">=</span> <span class="s">'1'</span>
    <span class="n">RESET_PASSWORD</span> <span class="o">=</span> <span class="s">'2'</span>
    <span class="n">J</span> <span class="o">=</span> <span class="s">'1'</span>
    <span class="n">R</span> <span class="o">=</span> <span class="s">'2'</span>
</pre></td></tr></tbody></table></code></div></div>

<p>SQLAlchemy가 알아서 별칭만을 알아서 추려낸 후 데이터베이스의 키로 설정해 줄 수 있다면 더 이상 손볼게 없어지지만, 아쉽게도 위 코드만으로는 다음과 같은 스키마로 enum 필드가 생성됩니다.</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>`request_type` enum('JOIN','RESET_PASSWORD','J','R') NOT NULL,
</pre></td></tr></tbody></table></code></div></div>

<p>J와 R로 데이터를 채울 수는 있지만 썩 만족스럽지 않습니다. 저장되는 데이터의 크기를 줄여보자는 의도와 상충되는 부분이 있고, 무엇보다 동일한 의미의 값이 중복되어 표시될 수도 있다는 점이 혼란을 야기할 수도 있을 것 같다는 판단입니다.</p>

<p>SQLAlchemy에서 Enum을 처리하는 방식을 살펴보면 대략 아래와 같이 구성되어 있습니다.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">enums</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">enums</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">"__members__"</span><span class="p">):</span>
    <span class="bp">self</span><span class="p">.</span><span class="n">enum_class</span> <span class="o">=</span> <span class="n">enums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">_members</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">enum_class</span><span class="p">.</span><span class="n">__members__</span>

    <span class="n">aliases</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">_members</span><span class="p">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="p">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">n</span><span class="p">]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">_omit_aliases</span> <span class="ow">is</span> <span class="n">NO_ARG</span> <span class="ow">and</span> <span class="n">aliases</span><span class="p">:</span>
        <span class="n">util</span><span class="p">.</span><span class="n">warn_deprecated_20</span><span class="p">(</span>
            <span class="s">"The provided enum %s contains the aliases %s. The "</span>
            <span class="s">"``omit_aliases`` will default to ``True`` in SQLAlchemy "</span>
            <span class="s">"2.0. Specify a value to silence this warning."</span>
            <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">enum_class</span><span class="p">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">aliases</span><span class="p">)</span>
        <span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p><code class="language-plaintext highlighter-rouge">__members__</code>를 통해 Enum 필드에 들어갈 항목들을 가져오는데, 아쉽게도 별칭만을 넣을 수 있는 옵션이 따로 없네요. 원키와 별칭의 순서를 바꾼 후 (별칭을 원키처럼 활용) <code class="language-plaintext highlighter-rouge">_omit_aliases</code>옵션을 줄까 생각해 보기도 하였지만, 별칭과 원키의 순서를 보장하고 싶다는 생각에 <code class="language-plaintext highlighter-rouge">__members__</code>를 조금 수정해 보기로 했습니다.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">AliasOnlyEnumMeta</span><span class="p">(</span><span class="n">EnumMeta</span><span class="p">):</span>
    <span class="o">@</span><span class="nb">property</span>
    <span class="k">def</span> <span class="nf">__members__</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="n">sp</span> <span class="o">=</span> <span class="nb">super</span><span class="p">().</span><span class="n">__members__</span>
        <span class="n">items</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="n">items</span><span class="p">()</span>
        <span class="n">alias_values</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">items</span> <span class="k">if</span> <span class="n">v</span><span class="p">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">n</span><span class="p">]</span>
        <span class="n">filtered</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">items</span> <span class="k">if</span> <span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">n</span> <span class="ow">and</span> <span class="n">v</span><span class="p">.</span><span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">alias_values</span><span class="p">)</span> <span class="ow">or</span> <span class="n">v</span><span class="p">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">n</span><span class="p">]</span>
        <span class="n">members</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">items</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">filtered</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">members</span>

<span class="k">class</span> <span class="nc">RequestEmailAuthType</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">AliasOnlyEnumMeta</span><span class="p">):</span>
    <span class="n">JOIN</span> <span class="o">=</span> <span class="s">'1'</span>
    <span class="n">RESET_PASSWORD</span> <span class="o">=</span> <span class="s">'2'</span>
    <span class="n">J</span> <span class="o">=</span> <span class="s">'1'</span>
    <span class="n">R</span> <span class="o">=</span> <span class="s">'2'</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Enum의 <code class="language-plaintext highlighter-rouge">metaclass</code>를 커스터마이징 한 <code class="language-plaintext highlighter-rouge">AliasOnlyEnumMeta</code>를 생성 후 <code class="language-plaintext highlighter-rouge">__members__</code> property를 override 해서 별칭이 없는 키와 별칭이 있다면 별칭 만을 내려 주도록 해보았습니다.
이제 이 코드를 적용해서 스키마를 생성해 보면 다음과 같이 Field가 생성되는 걸 확인할수 있죠.</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>`request_type` enum('J','R') NOT NULL,
</pre></td></tr></tbody></table></code></div></div>

<p>Enum의 값으로 사용되는 키가 상당히 간결해진 느낌은 있지만, 이제 약자로 표현된 필드의 값이 무엇이 의미하는지 쉽게 해석이 힘들어지는 문제가 생기네요. SQLAlchemy에서 제공하는 <code class="language-plaintext highlighter-rouge">comment</code>키워드에 <code class="language-plaintext highlighter-rouge">redoc</code>에서 사용했던 것과 같이 <code class="language-plaintext highlighter-rouge">__doc__</code> 이용해 해당 키의 의미를 설명으로 넣어보겠습니다.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">request_type</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Enum</span><span class="p">(</span><span class="n">RequestEmailAuthType</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="n">RequestEmailAuthType</span><span class="p">.</span><span class="n">__doc__</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이제 생성된 스키마를 보면 html과 일반 text의 차이 때문에 생각했던 것과는 조금 다른 형태의 comment가 붙어있는 걸 볼 수 있습니다.</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>`request_type` enum('J','R') NOT NULL COMMENT '\n        1: 가입, 2: 비밀번호 초기화\n        ',
</pre></td></tr></tbody></table></code></div></div>

<p>어떻게 본다면 별문제 아닌 것 같지만 만들다 만 것 같은 느낌의 결과는 용납할 수 없습니다. <code class="language-plaintext highlighter-rouge">comment</code>키워드에 일일이 주석을 달아주는 것도 좋은 방법이 될 수 있지만, 수작업이 많아진다는 건 그만큼 실수의 가능성이 커진다는 것과 동일한 의미이기 때문에 이것을 자동으로 만들어 줄 수 있는 무언가를 만들어야겠다는 생각을 하고 다음과 같이 만들어 보았습니다.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">AnnotatedEnum</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">tu</span> <span class="o">=</span> <span class="n">cls</span><span class="p">.</span><span class="n">__bases__</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tu</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># plain Enum
</span>            <span class="n">t</span> <span class="o">=</span> <span class="nb">object</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">tu</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">)</span>
        <span class="n">obj</span><span class="p">.</span><span class="n">_value_</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">desc</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">desc</span> <span class="o">=</span> <span class="n">desc</span>

    <span class="o">@</span><span class="nb">classmethod</span>
    <span class="o">@</span><span class="nb">property</span>
    <span class="k">def</span> <span class="nf">comment</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="n">items</span> <span class="o">=</span> <span class="n">cls</span><span class="p">.</span><span class="n">__members__</span><span class="p">.</span><span class="n">items</span><span class="p">()</span>
        <span class="n">docs</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">v</span><span class="p">.</span><span class="n">desc</span><span class="si">}</span><span class="s">'</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
        <span class="k">return</span> <span class="s">', '</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">RequestEmailAuthType</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">AnnotatedEnum</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">AliasOnlyEnumMeta</span><span class="p">):</span>
    <span class="s">"""
    1: 가입, 2: 비밀번호 초기화
    """</span>
    <span class="n">JOIN</span> <span class="o">=</span> <span class="s">'1'</span><span class="p">,</span> <span class="s">'회원가입'</span>
    <span class="n">RESET_PASSWORD</span> <span class="o">=</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'비밀번호 초기화'</span>
    <span class="n">J</span> <span class="o">=</span> <span class="s">'1'</span>
    <span class="n">R</span> <span class="o">=</span> <span class="s">'2'</span>

<span class="p">...</span>

<span class="n">request_type</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Enum</span><span class="p">(</span><span class="n">RequestEmailAuthType</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="n">RequestEmailAuthType</span><span class="p">.</span><span class="n">comment</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Python 열거형에 설명을 달아줄 수 있는 <code class="language-plaintext highlighter-rouge">AnnotatedEnum</code>을 만들어 하위 클래스로 <code class="language-plaintext highlighter-rouge">RequestEmailAuthType</code>을 생성했습니다. 이제 <code class="language-plaintext highlighter-rouge">JOIN = '1', '회원가입'</code>이런 식으로 Tuple 형태로 열거형의 값을 지정할 수 있고, 두 번째 인자는 desc에 자동으로 매핑 되도록 만들어주었고, 이런 식의 구조는 다음과 같은 장점을 가질 수 있습니다.</p>

<ul>
  <li>키, 값, 설명을 한 줄로 처리를 해서 보다 직관적으로 해석이 가능하다.</li>
  <li>키가 새로 생기거나 삭제될 때 <code class="language-plaintext highlighter-rouge">__doc__</code>처리의 누락을 최소화할 수 있다.</li>
</ul>

<p>위 방식으로 만들어낸 스키마를 보면 아래와 같이 좀 더 깔끔한 설명을 남길 수 있습니다.</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>`request_type` enum('J','R') NOT NULL COMMENT 'J: 회원가입, R: 비밀번호 초기화',
</pre></td></tr></tbody></table></code></div></div>

<h2 id="redoc에서도-annotation을-사용할-수-없을까"><span class="me-2">redoc에서도 Annotation을 사용할 수 없을까?</span><a href="#redoc에서도-annotation을-사용할-수-없을까" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>키와 값, 그리고 설명을 한 줄로 관리할 수 있게 만들었다면 이를 다른 곳에서도 활용할 수 있는 게 더 좋겠다는 생각이 들어 앞서 만든 <code class="language-plaintext highlighter-rouge">AliasOnlyEnumMeta</code>클래스를 생성할 때에 몇 가지 수정사항을 넣어 열거형의 <code class="language-plaintext highlighter-rouge">__doc__</code>을 자동으로 만들어 주는 기능을 넣어봤습니다.
redoc은 html 태그를 지원하다 보니 키와 값에 대한 설명에 약간의 강조 처리도 함께 적용시켜보았죠.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">AliasOnlyEnumMeta</span><span class="p">(</span><span class="n">EnumMeta</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">metacls</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">classdict</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">AliasOnlyEnumMeta</span><span class="p">,</span> <span class="n">metacls</span><span class="p">).</span><span class="n">__new__</span><span class="p">(</span><span class="n">metacls</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">classdict</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">members</span> <span class="o">=</span> <span class="n">obj</span><span class="p">.</span><span class="n">__members__</span>
        <span class="n">_desc_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s">'&lt;em&gt;</span><span class="si">{</span><span class="n">v</span><span class="p">.</span><span class="n">value</span><span class="si">}</span><span class="s">&lt;/em&gt; : &lt;strong&gt;</span><span class="si">{</span><span class="n">v</span><span class="p">.</span><span class="n">desc</span> <span class="ow">or</span> <span class="s">"-"</span><span class="si">}</span><span class="s">&lt;/strong&gt;'</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">members</span><span class="p">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="s">'desc'</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="n">obj</span><span class="p">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="s">', '</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">_desc_list</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span>

</pre></td></tr></tbody></table></code></div></div>

<p>위 코드를 이용해 redoc 문서를 보면 아래와 같이 강조되는 항목들이 생겨났습니다.
<a href="/assets/res/alex/enum-body-auto-doc.png" class="popup img-link center-image shimmer"><img src="/assets/res/alex/enum-body-auto-doc.png" alt="auto-doc-request-body-enum"  loading="lazy"></a>
처음보다 훨씬 보기 좋은 문서가 만들어졌습니다. 또한 열거형에 개발자가 서술한 <code class="language-plaintext highlighter-rouge">__doc__</code>을 그대로 유지하면서 메모리상의 <code class="language-plaintext highlighter-rouge">__doc__</code>만을 변경처리하여, 열거형의 Overview를 그대로 유지하면서 API / Database의 설명만을 자동으로 만들어 주는 형식이라 여러 가지로 효율성이 증대되는 방식을 만들어 낸 것 같습니다.</p>


  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/python/">python</a>,
          <a href="/categories/structure/">structure</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/enum/"
            class="post-tag no-text-decoration"
          >enum</a>
        
          <a
            href="/tags/sqlalchemy/"
            class="post-tag no-text-decoration"
          >sqlalchemy</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=Python%20%EC%97%B4%EA%B1%B0%ED%98%95%EA%B3%BC%20SQLAlchemy%20-%20BY%20Soft%20Tech%20Insights&url=https%3A%2F%2Fblog.by-softcorp.com%2Fposts%2Fannotated-enum%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=Python%20%EC%97%B4%EA%B1%B0%ED%98%95%EA%B3%BC%20SQLAlchemy%20-%20BY%20Soft%20Tech%20Insights&u=https%3A%2F%2Fblog.by-softcorp.com%2Fposts%2Fannotated-enum%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=https%3A%2F%2Fblog.by-softcorp.com%2Fposts%2Fannotated-enum%2F&text=Python%20%EC%97%B4%EA%B1%B0%ED%98%95%EA%B3%BC%20SQLAlchemy%20-%20BY%20Soft%20Tech%20Insights" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/reuse-viewmodel/">공통 기능을 가진 ViewModel 만들어 재사용하기</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/apply-mvvm-design/">신입 프론트엔드 개발자의 MVVM 패턴 적용기</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/fast-api-db-test/">FastAPI와 SQLAlchemy 환경에서 Database Test</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/annotated-enum/">Python 열거형과 SQLAlchemy</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/fast-api-validator/">FastAPI 유효성 검사</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/design-pattern/">design-pattern</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/fastapi/">fastapi</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/mvvm/">mvvm</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/sqlalchemy/">sqlalchemy</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/enum/">enum</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/pydantic/">pydantic</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/unittest/">unittest</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/validate/">validate</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="ps-0 pe-4">
    <h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->














  

  

  

  

  

  

  

  
    
  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/fast-api-db-test/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1656225120"
  data-df="ll"
  
>
  Jun 26, 2022
</time>

              <h4 class="pt-0 my-2">FastAPI와 SQLAlchemy 환경에서 Database Test</h4>
              <div class="text-muted">
                <p>
                  





                  FIRST 원칙

단위 테스트를 수행하는 데 있어 여러 가지 가이드가 있지만 일반적으로 적용하고 있는 FIRST 원칙은 다음과 같습니다.


  Fast
  Independent
  Repeatable
  Self-Validating
  Timely


하지만 22년 6월 기준 FastAPI와 SQLAlchemy에서 제공하는 공식문서상의 튜토리얼을 따...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/fast-api-validator/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1650844800"
  data-df="ll"
  
>
  Apr 25, 2022
</time>

              <h4 class="pt-0 my-2">FastAPI 유효성 검사</h4>
              <div class="text-muted">
                <p>
                  





                  Request Body Validate

API 요청을 받으면 최소한으로 수행해야 하는 유효성 검사가 있습니다. 보안의 가장 기본인 SQL Injection 공격 이외에도 전달받은 데이터가 필요로 하는 최소한의 규칙 등이 있습니다.
password를 예로 들자면 대소문자, 숫자, 특수문자를 포함해 최소 8에서 최대 20자리까지의 텍스트를 만족한다던가 ...
                </p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/fast-api-validator/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>FastAPI 유효성 검사</p>
    </a>
  

  
    <a
      href="/posts/fast-api-db-test/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>FastAPI와 SQLAlchemy 환경에서 Database Test</p>
    </a>
  
</nav>

            
              
              <!--  The comments switcher -->


            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>
    ©
    <time>2024</time>
    <a href="https://github.com/BY-SoftCorp">BY-Soft</a>.
    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/design-pattern/">design-pattern</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/fastapi/">fastapi</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/mvvm/">mvvm</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/sqlalchemy/">sqlalchemy</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/enum/">enum</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/pydantic/">pydantic</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/unittest/">unittest</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/validate/">validate</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->

    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.25.0/dist/tocbot.min.js"></script>






<script defer src="/assets/js/dist/post.min.js"></script>






    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  /* Note: dependent library will be loaded in `js-selector.html` */
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5"></p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>

